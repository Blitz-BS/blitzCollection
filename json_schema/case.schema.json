{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://raw.githubusercontent.com/Blitz-BS/blitzCollection/refs/heads/main/json_schema/case.schema.json",
    "title": "Dossier",
    "description": "Dossier dans le cadre d'un contrat",
    "required": [ "contractId", "reference","creditor","debtors","entries"],
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "$schema": {
            "title" : "Schéma JSON",
            "description" : "URL du schéma",
            "type": "string",
            "format": "uri"
        },
        "contractId" : {
            "title" : "Identifiant du contrat",
            "description" : "Identifiant du contrat entre la société de recouvrement et son client. Il s'agit de l'identifiant unique dans Blitz Collection",
            "type" : "integer"
        },
        "reference" : {
            "title" : "Référence",
            "description" : "Référence du dossier chez le client de la société de recouvrement. Cette référence doit être unique pour un client et un créancier donné.",
            "type": "string"
        },
        "creditor": {
            "title": "Créancier",
            "$ref": "./person.schema.json"
        },
        "debtors": {
            "title" : "Débiteurs",
            "description": "Débiteur ou co-débiteurs et leurs engagements respectifs. Si l'engagement n'est pas rempli, la situation est solidaire",
            "type": "array",
            "minItems": 1,
            "items": {
                "$ref": "./debtor.schema.json"
            }
        },
        "guarantors": {
            "title": "Cautions",
            "description": "Cautions du dossier et leurs engagements respectifs. Si l'engagement n'est pas rempli, la caution est solidaire",
            "type": "array",
            "items": {
                "$ref": "./debtor.schema.json"
            }
        },
        "entries": {
            "title": "Écritures",
            "description": "Écriture comptables du dossier",
            "type": "array",
            "minItems": 1,
            "items": {
                "oneOf" : [
                    {
                        "$ref": "./debt.schema.json"
                    },
                    {
                        "$ref": "./payment.schema.json"
                    },
                    {
                        "$ref": "./creditNote.schema.json"
                    },
                    {
                        "$ref": "./incidental.schema.json"
                    },
                    {
                        "$ref": "./adjustment.schema.json"
                    },
                    {
                        "$ref": "./closing.schema.json"
                    }
                ]
            }
        },
        "parties":{
            "title": "Tiers",
            "description": "Tiers impliqués dans le dossier",
            "items": {
                "$ref": "./person.schema.json"           
            }
        },
        "currencyCode" : {
            "title" : "Code devise",
            "description" : "Code devise du dossier. Ce code est la devise par défaut du dossier",
            "$ref" : "./currencyCode.schema.json"
        },
        "legislation": {
            "title" : "Legislation",
            "description" : "Législation utilisée pour les frais accessoires. Code ISO 3166-1",
            "default": "FR",
            "enum" : ["af", "ax", "al", "dz", "as", "ad", "ao", "ai", "aq", "ag", "ar", "am", "aw", "au", "at", "az", "bs", "bh", "bd", "bb", "by", "be", "bz", "bj", "bm", "bt", "bo", "bq", "ba", "bw", "bv", "br", "io", "bn", "bg", "bf", "bi", "cv", "kh", "cm", "ca", "ky", "cf", "td", "cl", "cn", "cx", "cc", "co", "km", "cg", "cd", "ck", "cr", "ci", "hr", "cu", "cw", "cy", "cz", "dk", "dj", "dm", "do", "ec", "eg", "sv", "gq", "er", "ee", "sz", "et", "fk", "fo", "fj", "fi", "fr", "gf", "pf", "tf", "ga", "gm", "ge", "de", "gh", "gi", "gr", "gl", "gd", "gp", "gu", "gt", "gg", "gn", "gw", "gy", "ht", "hm", "va", "hn", "hk", "hu", "is", "in", "id", "ir", "iq", "ie", "im", "il", "it", "jm", "jp", "je", "jo", "kz", "kz", "kz", "kp", "kr", "kw", "kg", "la", "lv", "Lb", "ls", "lr", "ly", "li", "lt", "lu", "mo", "mg", "mw", "my", "mv", "ml", "mt", "mh", "mq", "mr", "mu", "yt", "mx", "fm", "md", "mc", "mn", "me", "ms", "ma", "mz", "mm", "nr", "np", "nl", "nc", "nz", "ni", "ne", "ng", "nu", "nf", "mk", "mp", "no", "om", "pk", "pw", "ps", "pa", "pg", "py", "pe", "ph", "pn", "pl", "pt", "pr", "qa", "re", "ro", "ru", "rw", "bl", "sh", "kn", "lc", "mf", "pm", "vc", "ws", "sm", "st", "sa", "sn", "rs", "sc", "sl", "sg", "sx", "sk", "si", "sb", "so", "za", "gs", "ss", "es", "lk", "sd", "sr", "sj", "se", "ch", "sy", "tw", "tj", "tz", "th", "tl", "tg", "tk", "to", "tt", "tn", "tr", "tm", "tc", "tv", "ug", "ua", "ae", "gb", "us", "um", "uy", "uz", "vu", "ve", "vn", "vg", "vi", "wf", "eh", "ye", "zm", "zw"]
        }
    }
}