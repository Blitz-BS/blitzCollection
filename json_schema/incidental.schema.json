{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://raw.githubusercontent.com/Blitz-BS/blitzCollection/refs/heads/MGP-421-modularisation-de-l-objet-json-schema-pour-l-integ/json_schema/incidental.schema.json",
    "title": "Frais accessoires",
    "description": "Frais accessoires d'une dette",
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "$schema": {
            "title" : "Schéma JSON",
            "description" : "URL du schéma",
            "type": "string",
            "format": "uri"
        },
        "id": {
            "title": "Identifiant accessoires",
            "description": "Identifiant unique des frais accessoires, renseigner pour modifier les informations",
            "type": "string"
        },
        "incidentalCategory": {
            "title" : "Catégorie d'accessoires",
            "description": "Type d'accessoires (intérêts, frais)",
            "enum" : ["interests", "fees"]
        },
        "name": {
            "title" : "Nom des frais accessoires",
            "description": "Frais accessoires dans le droit français",
            "enum" : ["intérêt de retard", "pénalité de retard", "indemnité forfaitaire", "dommages et intérêts", "dépens", "article 700"]
        },
        "rate": {
            "title" : "Taux d'intérêt",
            "description": "Taux d'intérêt entre 0 et 1",
            "type": "number",
            "minimum" : 0,
            "maximum" : 1
        },
        "startDate": {
            "title" : "Date de départ des intérêts",
            "description" : "Date à partir de laquelle les intérêts sont calculés",
            "type": "string",
            "format" : "date"
        },
        "endDate": {
            "title" : "Date de fin des intérêts",
            "description" : "Date à laquelle le calcul des intérêts s'arrête",
            "type": "string",
            "format" : "date"
        },
        "amount": {
            "title" : "Montant des frais accessoires",
            "description": "Exemple : 40.00. Montant dans la devise de la dette",
            "type": "number",
            "minimum": -999999999999.99,
            "maximum": 999999999999.99
        }
    },
    "oneOf": [
        {
            "properties": {
                "incidentalCategory": {"const": "interests"},
                "name": {"const": "intérêt de retard"}       
            },
            "required": ["incidentalCategory","name", "rate","startDate"]            
        },
        {
            "properties": {
                "incidentalCategory" : {"const": "fees"}
            },
            "anyOf": [
                {
                    "properties": {
                        "name": {"const": "pénalité de retard"}
                    }
                },
                {
                    "properties": {
                        "name": {"const": "indemnité forfaitaire"}
                    }
                },
                {
                    "properties": {
                        "name": {"const": "dommages et intérêts"}
                    }
                },
                {
                    "properties": {
                        "name": {"const": "dépens"}
                    }
                },
                {
                    "properties": {
                        "name": {"const": "article 700"}
                    }
                }
            ],
            "required" : ["incidentalCategory","name","amount"]
        }
    ]
}